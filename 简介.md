### 开发与部署

| 项目             | 功能                          | 开发运行执行命令                                             | 产品打包执行命令                                             |
| ---------------- | ----------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| way-api          | 服务接口                      | IDE直接运行WayApplication                                    | ./gradlew bootjar                                            |
| way-admin-shop   | 商家平台                      | npm run dev                                                  | npm run build                                                |
| way-admin-manage | 管理平台                      | npm run dev                                                  | npm run build:prod                                           |
| way              | 移动端web                     | npm run dev                                                  | npm run pack:web                                             |
| way-app-ios      | 移动端app（包括iOS、Android） | android: 根路径./android.dev（**如果dist不提交**），然后在Android Studio运行模拟器或打包<br><br>iOS: 根路径npm run copy:ios，然后在xcode内执行运行模拟器 | android: 根路径./android.prod（**如果dist不提交**），然后执行./gradlew assembleDevelopRelease<br><br/>iOS: 根路径npm run copy:ios，然后在xcode内执行运行模拟器 |

---

### Springboot

#### 启动脚本

线上设置`--spring.profiles.active=production`代表生产环境，日志最低级别info  
执行启动  
最小环境资源
```shell
java -Dspring.profiles.active=production -jar on_the_way-1.0.1-SNAPSHOT.jar -server -Xmx512M -Xms128M -Xmn512M -XX:MetaspaceSize=64M -XX:MaxMetaspaceSize=512M -Xss256K -XX:+DisableExplicitGC -XX:SurvivorRatio=1 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -XX:+UseCMSCompactAtFullCollection -XX:CMSFullGCsBeforeCompaction=0 -XX:+CMSClassUnloadingEnabled -XX:LargePageSizeInBytes=128M -XX:+UseFastAccessorMethods -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=70 -XX:SoftRefLRUPolicyMSPerMB=0 -XX:+PrintClassHistogram -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintHeapAtGC -Xloggc:/apps/log/gc.log &
```

---

### Nginx

#### Let's encrypt证书

有一个定时任务`crontab -l`查看，为了防止证书过期（或者一些不知道的原因）**每月22日凌晨3点**执行获取一次新证书。

如果**修改定时任务**（有权限），先`chattr -i /var/spool/cron/root`，修改`crontab -e`，再``chattr +i /var/spool/cron/root``

